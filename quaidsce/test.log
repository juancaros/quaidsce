--------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\jccaro\quaidsce\quaidsce\test.log
  log type:  text
 opened on:  13 Aug 2021, 16:40:23

. webuse food, clear

. program drop _all

. 
. ***debugginb tools
. set trace on

. set tracedepth 4

. *set matadebug on
. *mata: mata set matalnum on
. 
. foreach i of numlist 1/4 {
  2. gen aux = cond(runiform() < 0.2, 0, 1)
  3. replace w`i'=0 if aux==0
  4. drop aux 
  5. }
- foreach i of numlist 1/4 {
- gen aux = cond(runiform() < 0.2, 0, 1)
- replace w`i'=0 if aux==0
= replace w1=0 if aux==0
(784 real changes made)
- drop aux
- }
- gen aux = cond(runiform() < 0.2, 0, 1)
- replace w`i'=0 if aux==0
= replace w2=0 if aux==0
(845 real changes made)
- drop aux
- }
- gen aux = cond(runiform() < 0.2, 0, 1)
- replace w`i'=0 if aux==0
= replace w3=0 if aux==0
(806 real changes made)
- drop aux
- }
- gen aux = cond(runiform() < 0.2, 0, 1)
- replace w`i'=0 if aux==0
= replace w4=0 if aux==0
(805 real changes made)
- drop aux
- }

. 
. gen w5=1-w1-w2-w3-w4

. replace w5=0 if w5<0.0001
(1,497 real changes made)

. gen p5=0.5*p1+0.5*p3+exp(rnormal())

. gen lnp5=ln(p5)

. 
. set seed 1

. gen nkids = int(runiform()*4)

. gen rural = (runiform() > 0.2)

. gen income = exp(rnormal())+exp(rnormal())

. 
end of do-file

. do "C:\Users\jccaro\AppData\Local\Temp\STDb44_000000.tmp"

. quaidsce w1 w2 w3 w4 w5, anot(10) prices(p1 p2 p3 p4 p5) expenditure(expfd) demographics(n
> kids rural income) nolog 
(obs = 4,048)
Calculating NLS estimates...
